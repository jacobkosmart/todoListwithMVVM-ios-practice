### ğŸ”· Save and persist data with UserDefaults

- UserDefaults ì— data ë¥¼ ì €ì¥í•˜ì—¬ ì•±ì´ ì¢…ë£Œ í›„ì—ë„, ì„¤ì •í•œ data ê°€ ì‚¬ë¼ ì§€ì§€ ì•Šê³  ë‚¨ì•„ ìˆê²Œ í•˜ëŠ” ë²•

- UserDefaults ì—ëŠ” ì£¼ë¡œ small size ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©° ì£¼ë¡œ, id , name ë“± ë‹¨ìˆœí•œ string, Int, Bool í˜•ì‹ì˜ íƒ€ì…ì„ ì €ì¥í•¨

- ë§Œì•½ data ì˜ ìˆ˜ê°€ ëª‡ë°±, ìˆ˜ì²œê°œë¡œ ë„˜ì–´ê°€ëŠ” í° ì‚¬ì´ì¦ˆê°€ ë˜ë©´ core data ë‚˜, DB ì™€ ì—°ê²°í•´ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤

### ğŸ”¶ Model ì—ì„œ Codable ì¶”ê°€

- data ë¥¼ json í˜•íƒœë¡œ ë³€í™˜, ê°€ì ¸ì˜¤ë ¤ë©´ encode, decode ë¥¼ í•´ì•¼í•˜ëŠ”ë° model ì—ì„œ Codable type ì„ ë¨¼ì € ì§€ì •í•´ì¤˜ì•¼ í•¨

```swift
// ItemModel.swift

struct ItemModel: Identifiable, Codable {
	let id: String
	let title: String
	let isCompleted: Bool
......
}
```

### ğŸ”¶ sava items to UserDefaults method

```swift
// save items to UserDefaults
func saveItems() {
  // error ê°€ ë°œìƒ¹í•´ë„ ê·¸ëƒ¥ nil ë¡œ return ë˜ê²Œ try? ë¡œ í•˜ê³ ,
  // ê¸°ì¡´ items ë¥¼ -> json í˜•ì‹ìœ¼ë¡œ encode í•´ì£¼ê¸°
  if let encodedData = try? JSONEncoder().encode(items) {
    // ë³€í™˜ëœ json ë°ì´í„°ë¥¼ UerDefaults ì— ì €ì¥í•˜ê¸°
    UserDefaults.standard.set(encodedData, forKey: itemsKey)
  }
}
```

- ìœ„ì˜ ì™„ì„±ëœ method ë¥¼ items ê°€ ë³€ê²½ ë ë•Œ, (ì§€ì›Œì§ˆë•Œ, ì´ë™í• ë•Œ, ì¶”ê°€í• ë•Œ , toggle() í•´ì„œ isCompleted ê°€ ë³€ê²½ì´ ë ë•Œ) ëª¨ë‘ ì‹¤í–‰ë˜ë„ë¡ items ì˜ ê°’ì´ ë³€ê²½ë ë•Œ ë§ˆë‹¤ `saveItems()` ê°€ ì‹¤

```swift
// MARK: -  PROPERTY

@Published var items: [ItemModel] = [] {
  // didSet ì„ ì„¤ì •í•´ì¤˜ì„œ items ì˜ ê°’ì´ ë³€ê²½ë ë•Œ ë§ˆë‹¤ ì‹¤í–‰ í•  ì½”ë“œ ì‘ì„±
  didSet {
    saveItems()
  }
}
let itemsKey: String = "items_list"
```

### ğŸ”¶ ì €ì¥ëœ UserDefaults ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°

- ê¸°ì¡´ì— sample ë¡œ ì‘ì„±ëœ ë°ì´í„°ê°€ ì•„ë‹Œ ì•±ì´ ì‹¤í–‰ë ë•Œ UserDefaults ì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°

```swift
// getItems
func getItems() {

  // UserDefaults ì— ê°’ì´ ì—†ì„ ìˆ˜ ë„ ìˆê¸° ë•Œë¬¸ì— optional ë¡œ ë„˜ì–´ì™€ì„œ guard ë¬¸ìœ¼ë¡œ ì‘ì„±
  // 2ê°œì˜ ë³€ìˆ˜ê°€ ê³µí†µìœ¼ë¡œ optional ì´ê¸° ë•Œë¬¸ì— guard ë¬¸ì„ combine í•´ì¤Œ
  guard
    let data = UserDefaults.standard.data(forKey: itemsKey),
    let savedItems = try? JSONDecoder().decode([ItemModel].self, from: data)
  else { return }
  // ë°›ì€ data ê°€ json í˜•íƒœ ì´ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ì‚¬ìš©í• ë ¤ë©´ decoding í•´ì¤˜ì•¼ í•¨
  // decode(ë°”ê¿€ í˜•ì‹, from: json í˜•íƒœ ë°ì´í„°)
  // savedItems ë„ optional ì´ê¸° ë•Œë¬¸ì— guard ë¬¸ìœ¼ë¡œ ì‘ìƒ

  self.items = savedItems // ê°€ì ¸ì˜¨ savedItems ë¥¼ ê¸°ì¡´ items ì— ë„£ê¸°
}
```

<img height="350" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="https://user-images.githubusercontent.com/28912774/149602471-90392c29-8c92-46fc-b110-e14bc5c37b49.gif">
